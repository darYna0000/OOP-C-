#include <iostream>
#include <cmath>
#include <stdexcept>
#include <string>

using namespace std;

class Circle {
private:
    double radius;
    double S;
    double circumference;

    void calculateProperties() {
        S = M_PI * radius * radius;
        circumference = 2 * M_PI * radius;
    }

public:
    // Конструктор
    Circle() : radius(0), S(0), circumference(0) {}
    
    // Конструктор з параметром
    Circle(double r) {
        setRadius(r);
    }

    // Сетери з обробкою винятків
    void setRadius(double r) {
        if (r < 0) {
            throw invalid_argument("Радіус не може бути від'ємним");
        }
        radius = r;
        calculateProperties();
    }

    // Гетери повертають значення полів
    double getRadius() const { return radius; }
    double getArea() const { return S; }
    double getCircumference() const { return circumference; }

    // Метод розрахунку площі
    double calculateArea() {
        calculateProperties(); //властивості
        return S;
    }

    // Метод виведення даних
    void displayData() const {
        cout << "Коло:" << endl;
        cout << "Радіус: " << radius << endl;
        cout << "Площа: " << S << endl;
        cout << "Довжина кола: " << circumference << endl;
    }

    // Перевантаження потокового введення
    friend istream& operator>>(istream& is, Circle& circle) {
        double r;
        is >> r; //
        
        if (is.fail()) {
            throw runtime_error("Помилка введення: очікувалось число");
        }
        
        circle.setRadius(r);
        return is;
    }

    // Перевантаження потокового виведення
    friend ostream& operator<<(ostream& os, const Circle& circle) {
        os << "Коло: радіус = " << circle.radius 
           << ", площа = " << circle.S 
           << ", довжина кола = " << circle.circumference;
        return os;
    }
};

int main() {
    try {
        Circle circle1;
        
        //перевантаження оператора
        cout << "Введіть радіус кола: ";
        cin >> circle1;

        
        cout << "\nДані про коло:" << endl;
        cout << circle1 << endl;
        
        cout << "\nВикористання методу displayData():" << endl;
        circle1.displayData();
        
        cout << "\nПерерахунок площі: " << circle1.calculateArea() << endl;
        
        // Тест обробки винятків
        cout << "\nТест з від'ємним радіусом:" << endl;
        try {
            Circle circle2(-5);
        } catch (const invalid_argument& e) {
            cout << "Виняток: " << e.what() << endl;
        }
        
        cout << "\nТест з некоректним введенням:" << endl;
        try {
            Circle circle3;
            cout << "Введіть нечислове значення: ";
            cin.clear();
            cin.ignore(10000, '\n');
            cin >> circle3;
        } catch (const runtime_error& e) {
            cout << "Виняток: " << e.what() << endl;
        }
        
    } catch (const exception& e) {
        cerr << "Сталася помилка: " << e.what() << endl;
        return 1;
    }
    
    return 0;
}
